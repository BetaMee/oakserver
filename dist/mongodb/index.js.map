{"version":3,"sources":["../../server/mongodb/index.js"],"names":["Promise","global","database","set","connect","dbPath","once","console","log","connection","on","err","error"],"mappings":";;;;;;;;;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AARA;;;;AACA;;;;;;AAEA;AACA,mBAASA,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA;;;AAIA;AACO,MAAME,8BAAW,MAAM;AAC5B,qBAASC,GAAT,CAAa,OAAb,EAAsB,IAAtB;;AAEA,qBAASC,OAAT,CAAiB,iBAAOC,MAAxB;;AAEA,qBAASC,IAAT,CAAc,MAAd,EAAsB,MAAM;AAC1BC,YAAQC,GAAR,CAAY,2BAAZ;AACD,GAFD;;AAIA,qBAASC,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,MAAM;AAC3C,uBAASN,OAAT,CAAiB,iBAAOC,MAAxB;AACD,GAFD;AAGA,qBAASI,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgCC,OAAO;AACrCJ,YAAQK,KAAR,CAAcD,GAAd;AACD,GAFD;;AAIA,qBAASF,UAAT,CAAoBC,EAApB,CAAuB,MAAvB,EAA+B,YAAY;AACzCH,YAAQC,GAAR,CAAY,uBAAZ,EAAqC,iBAAOH,MAA5C;AACD,GAFD;AAGD,CAnBM","file":"index.js","sourcesContent":["import Mongoose from 'mongoose'\r\nimport config from '../config'\r\n\r\n// Mongoose使用全局Promise\r\nMongoose.Promise = global.Promise\r\n\r\n// 导出Models\r\nexport * from './models/article'\r\nexport * from './models/author'\r\n\r\n// 连接mongodb\r\nexport const database = () => {\r\n  Mongoose.set('debug', true)\r\n\r\n  Mongoose.connect(config.dbPath)\r\n\r\n  Mongoose.once('open', () => {\r\n    console.log('we have connected mongodb')\r\n  })\r\n\r\n  Mongoose.connection.on('disconnected', () => {\r\n    Mongoose.connect(config.dbPath)\r\n  })\r\n  Mongoose.connection.on('error', err => {\r\n    console.error(err)\r\n  })\r\n\r\n  Mongoose.connection.on('open', async () => {\r\n    console.log('Connected to MongoDB ', config.dbPath)\r\n  })\r\n}"]}