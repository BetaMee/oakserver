{"version":3,"sources":["../../server/init/mongodb.js"],"names":["Promise","global","connect","dbpath","connection","once","console","log","on","dbPath","err","error"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;AACA,mBAASA,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA;;kBACe,MAAM;AACnB;;AAEA,qBAASE,OAAT,CAAiB,iBAAOC,MAAxB;;AAEA,qBAASC,UAAT,CAAoBC,IAApB,CAAyB,MAAzB,EAAiC,MAAM;AACrCC,YAAQC,GAAR,CAAY,2BAAZ;AACD,GAFD;;AAIA,qBAASH,UAAT,CAAoBI,EAApB,CAAuB,cAAvB,EAAuC,MAAM;AAC3C,uBAASN,OAAT,CAAiB,iBAAOO,MAAxB;AACD,GAFD;AAGA,qBAASL,UAAT,CAAoBI,EAApB,CAAuB,OAAvB,EAAgCE,OAAO;AACrCJ,YAAQK,KAAR,CAAcD,GAAd;AACD,GAFD;AAID,C","file":"mongodb.js","sourcesContent":["import Mongoose from 'mongoose'\r\nimport config from '../config'\r\n\r\n// Mongoose使用全局Promise\r\nMongoose.Promise = global.Promise\r\n\r\n// 连接mongodb\r\nexport default () => {\r\n  // Mongoose.set('debug', true)\r\n\r\n  Mongoose.connect(config.dbpath)\r\n\r\n  Mongoose.connection.once('open', () => {\r\n    console.log('we have connected mongodb')\r\n  })\r\n\r\n  Mongoose.connection.on('disconnected', () => {\r\n    Mongoose.connect(config.dbPath)\r\n  })\r\n  Mongoose.connection.on('error', err => {\r\n    console.error(err)\r\n  })\r\n\r\n}"]}